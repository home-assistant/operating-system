# Home Assistant Operating System pull-request checks

name: PR checks

on: [pull_request]

jobs:
  linters:
    runs-on: ubuntu-22.04
    steps:
    - name: Install additional dependencies
      run: |
        sudo apt-get update
        sudo apt-get -y install \
          python3-flake8

    - name: Check out code
      uses: actions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8 # v5.0.0
      with:
        submodules: true

    - name: Check Dockerfile
      uses: brpaz/hadolint-action@c27bd9edc1e95eed30474db8f295ff5807ebca14 # v1.5.0
      with:
        dockerfile: Dockerfile

    - name: Check shell scripts
      uses: ludeeus/action-shellcheck@00cae500b08a931fb5698e11e79bfbd38e612a38 # 2.0.0
      with:
        ignore_paths: buildroot

    - name: Check buildroot-external packages
      run: |
        buildroot/utils/check-package --exclude PackageHeader --exclude Upstream --br2-external buildroot-external/package/*/*
